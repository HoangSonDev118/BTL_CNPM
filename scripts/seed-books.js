const { PrismaClient } = require("@prisma/client");

const prisma = new PrismaClient();

async function main() {
  console.log("\nüå± B·∫Øt ƒë·∫ßu seed d·ªØ li·ªáu s√°ch...\n");

  // 1) Danh m·ª•c
  console.log("üìö T·∫°o danh m·ª•c...");
  const categories = await Promise.all([
    prisma.category.upsert({
      where: { slug: "sach-thieu-nhi" },
      update: {},
      create: {
        name: "S√°ch Thi·∫øu Nhi",
        slug: "sach-thieu-nhi",
        description: "S√°ch d√†nh cho tr·∫ª em v√† thi·∫øu ni√™n",
        image: "https://images.unsplash.com/photo-1512820790803-83ca734da794?w=800",
      },
    }),
    prisma.category.upsert({
      where: { slug: "van-hoc" },
      update: {},
      create: {
        name: "VƒÉn H·ªçc",
        slug: "van-hoc",
        description: "Ti·ªÉu thuy·∫øt, truy·ªán ng·∫Øn, th∆° ca",
        image: "https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=800",
      },
    }),
    prisma.category.upsert({
      where: { slug: "kinh-te" },
      update: {},
      create: {
        name: "Kinh T·∫ø",
        slug: "kinh-te",
        description: "S√°ch v·ªÅ kinh doanh, ƒë·∫ßu t∆∞, qu·∫£n l√Ω",
        image: "https://images.unsplash.com/photo-1554224155-8d04cb21cd6c?w=800",
      },
    }),
    prisma.category.upsert({
      where: { slug: "ky-nang-song" },
      update: {},
      create: {
        name: "K·ªπ NƒÉng S·ªëng",
        slug: "ky-nang-song",
        description: "Ph√°t tri·ªÉn b·∫£n th√¢n, t∆∞ duy, giao ti·∫øp",
        image: "https://images.unsplash.com/photo-1499750310107-5fef28a66643?w=800",
      },
    }),
    prisma.category.upsert({
      where: { slug: "khoa-hoc-cong-nghe" },
      update: {},
      create: {
        name: "Khoa H·ªçc - C√¥ng Ngh·ªá",
        slug: "khoa-hoc-cong-nghe",
        description: "S√°ch v·ªÅ khoa h·ªçc, c√¥ng ngh·ªá, l·∫≠p tr√¨nh",
        image: "https://images.unsplash.com/photo-1518770660439-4636190af475?w=800",
      },
    }),
  ]);
  console.log(`‚úÖ ƒê√£ t·∫°o ${categories.length} danh m·ª•c\n`);

  // 2) T√°c gi·∫£ (m·ªü r·ªông)
  console.log("‚úçÔ∏è  T·∫°o t√°c gi·∫£...");
  const authors = await Promise.all([
    prisma.author.upsert({
      where: { slug: "nguyen-nhat-anh" },
      update: {},
      create: {
        name: "Nguy·ªÖn Nh·∫≠t √Ånh",
        slug: "nguyen-nhat-anh",
        biography:
          "Nh√† vƒÉn n·ªïi ti·∫øng Vi·ªát Nam v·ªõi nhi·ªÅu t√°c ph·∫©m vƒÉn h·ªçc thi·∫øu nhi ƒë∆∞·ª£c y√™u th√≠ch.",
        avatar: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400",
      },
    }),
    prisma.author.upsert({
      where: { slug: "dale-carnegie" },
      update: {},
      create: {
        name: "Dale Carnegie",
        slug: "dale-carnegie",
        biography:
          "T√°c gi·∫£ n·ªïi ti·∫øng ng∆∞·ªùi M·ªπ v·ªÅ ph√°t tri·ªÉn b·∫£n th√¢n v√† k·ªπ nƒÉng giao ti·∫øp.",
        avatar: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400",
      },
    }),
    prisma.author.upsert({
      where: { slug: "haruki-murakami" },
      update: {},
      create: {
        name: "Haruki Murakami",
        slug: "haruki-murakami",
        biography:
          "Ti·ªÉu thuy·∫øt gia Nh·∫≠t B·∫£n n·ªïi ti·∫øng th·∫ø gi·ªõi v·ªõi phong c√°ch vi·∫øt ƒë·ªôc ƒë√°o.",
        avatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400",
      },
    }),
    prisma.author.upsert({
      where: { slug: "tony-buoi-sang" },
      update: {},
      create: {
        name: "Tony Bu·ªïi S√°ng",
        slug: "tony-buoi-sang",
        biography:
          "T√°c gi·∫£ n·ªïi ti·∫øng v·ªÅ lƒ©nh v·ª±c kinh doanh v√† k·ªπ nƒÉng s·ªëng t·∫°i Vi·ªát Nam.",
        avatar: "https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=400",
      },
    }),
    prisma.author.upsert({
      where: { slug: "nguyen-ngoc-tu" },
      update: {},
      create: {
        name: "Nguy·ªÖn Ng·ªçc T∆∞",
        slug: "nguyen-ngoc-tu",
        biography: "Nh√† vƒÉn Vi·ªát Nam v·ªõi nhi·ªÅu t√°c ph·∫©m vƒÉn h·ªçc ƒë∆∞∆°ng ƒë·∫°i.",
        avatar: "https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400",
      },
    }),
    prisma.author.upsert({
      where: { slug: "robin-sharma" },
      update: {},
      create: {
        name: "Robin Sharma",
        slug: "robin-sharma",
        biography: "T√°c gi·∫£ Canada v·ªÅ l√£nh ƒë·∫°o v√† ph√°t tri·ªÉn c√° nh√¢n.",
        avatar: "https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=400",
      },
    }),
    prisma.author.upsert({
      where: { slug: "yuval-noah-harari" },
      update: {},
      create: {
        name: "Yuval Noah Harari",
        slug: "yuval-noah-harari",
        biography: "S·ª≠ gia Israel, t√°c gi·∫£ c·ªßa Sapiens v√† Homo Deus.",
        avatar: "https://images.unsplash.com/photo-1560250097-0b93528c311a?w=400",
      },
    }),
    prisma.author.upsert({
      where: { slug: "j-k-rowling" },
      update: {},
      create: {
        name: "J.K. Rowling",
        slug: "j-k-rowling",
        biography:
          "T√°c gi·∫£ ng∆∞·ªùi Anh c·ªßa series Harry Potter n·ªïi ti·∫øng th·∫ø gi·ªõi.",
        avatar: "https://images.unsplash.com/photo-1580489944761-15a19d654956?w=400",
      },
    }),
    prisma.author.upsert({
      where: { slug: "roald-dahl" },
      update: {},
      create: {
        name: "Roald Dahl",
        slug: "roald-dahl",
        biography:
          "Nh√† vƒÉn ng∆∞·ªùi Anh n·ªïi ti·∫øng v·ªõi c√°c t√°c ph·∫©m thi·∫øu nhi ƒë·ªôc ƒë√°o.",
        avatar: "https://images.unsplash.com/photo-1519085360753-af0119f7cbe7?w=400",
      },
    }),
    prisma.author.upsert({
      where: { slug: "paulo-coelho" },
      update: {},
      create: {
        name: "Paulo Coelho",
        slug: "paulo-coelho",
        biography: "Nh√† vƒÉn Brazil, t√°c gi·∫£ c·ªßa Nh√† gi·∫£ kim.",
        avatar: "https://images.unsplash.com/photo-1566492031773-4f4e44671857?w=400",
      },
    }),
  ]);
  console.log(`‚úÖ ƒê√£ t·∫°o ${authors.length} t√°c gi·∫£\n`);

  // 3) S√°ch (25+ quy·ªÉn)
  console.log("üìñ T·∫°o s√°ch...");
  const books = [
    // VƒÉn h·ªçc Vi·ªát Nam
    {
      title: "M·∫Øt Bi·∫øc",
      slug: "mat-biec",
      description:
        "C√¢u chuy·ªán t√¨nh ƒë·∫ßu trong s√°ng v√† ƒë·∫ßy c·∫£m ƒë·ªông c·ªßa Ng·∫°n v√† H√† Lan.",
      price: 95000,
      originalPrice: 120000,
      stock: 150,
      publishYear: 1990,
      publisher: "Nh√† xu·∫•t b·∫£n Tr·∫ª",
      pages: 256,
      isbn: "978-604-1-00001-1",
      coverImage:
        "https://images.unsplash.com/photo-1544947950-fa07a98d237f?w=600",
      isFeatured: true,
      authorId: authors[0].id,
      categoryId: categories[1].id,
    },
    {
      title: "T√¥i Th·∫•y Hoa V√†ng Tr√™n C·ªè Xanh",
      slug: "toi-thay-hoa-vang-tren-co-xanh",
      description:
        "Tu·ªïi th∆° c·ªßa hai anh em Thi·ªÅu v√† T∆∞·ªùng v·ªõi nh·ªØng k·ª∑ ni·ªám ƒë·∫πp v√† n·ªói bu·ªìn chia ly.",
      price: 105000,
      originalPrice: 135000,
      stock: 200,
      publishYear: 2010,
      publisher: "Nh√† xu·∫•t b·∫£n Tr·∫ª",
      pages: 368,
      isbn: "978-604-1-00002-8",
      coverImage:
        "https://images.unsplash.com/photo-1512820790803-83ca734da794?w=600",
      isFeatured: true,
      authorId: authors[0].id,
      categoryId: categories[0].id,
    },
    {
      title: "Cho T√¥i Xin M·ªôt V√© ƒêi Tu·ªïi Th∆°",
      slug: "cho-toi-xin-mot-ve-di-tuoi-tho",
      description:
        "Nh·ªØng c√¢u chuy·ªán v·ªÅ tu·ªïi th∆° ƒë·∫ßy ho√†i ni·ªám v√† c·∫£m x√∫c c·ªßa Nguy·ªÖn Nh·∫≠t √Ånh.",
      price: 89000,
      originalPrice: 110000,
      stock: 120,
      publishYear: 2014,
      publisher: "Nh√† xu·∫•t b·∫£n Tr·∫ª",
      pages: 324,
      isbn: "978-604-1-00015-8",
      coverImage:
        "https://images.unsplash.com/photo-1532012197267-da84d127e765?w=600",
      isFeatured: false,
      authorId: authors[0].id,
      categoryId: categories[0].id,
    },
    {
      title: "C√°nh ƒê·ªìng B·∫•t T·∫≠n",
      slug: "canh-dong-bat-tan",
      description:
        "Ti·ªÉu thuy·∫øt v·ªÅ cu·ªôc s·ªëng mi·ªÅn T√¢y s√¥ng n∆∞·ªõc ƒë·∫ßy ch·∫•t th∆° c·ªßa Nguy·ªÖn Ng·ªçc T∆∞.",
      price: 92000,
      stock: 80,
      publishYear: 2005,
      publisher: "Nh√† xu·∫•t b·∫£n H·ªôi Nh√† VƒÉn",
      pages: 280,
      isbn: "978-604-1-00020-2",
      coverImage:
        "https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=600",
      isFeatured: false,
      authorId: authors[4].id,
      categoryId: categories[1].id,
    },

    // K·ªπ nƒÉng s·ªëng
    {
      title: "ƒê·∫Øc Nh√¢n T√¢m",
      slug: "dac-nhan-tam",
      description:
        "Cu·ªën s√°ch kinh ƒëi·ªÉn v·ªÅ ngh·ªá thu·∫≠t giao ti·∫øp v√† t·∫°o d·ª±ng m·ªëi quan h·ªá.",
      price: 86000,
      originalPrice: 110000,
      stock: 300,
      publishYear: 1936,
      publisher: "Nh√† xu·∫•t b·∫£n T·ªïng H·ª£p",
      pages: 320,
      isbn: "978-604-1-00003-5",
      coverImage:
        "https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?w=600",
      isFeatured: true,
      authorId: authors[1].id,
      categoryId: categories[3].id,
    },
    {
      title: "Ngh·ªá Thu·∫≠t B√°n H√†ng Vƒ© ƒê·∫°i Nh·∫•t Th·∫ø Gi·ªõi",
      slug: "nghe-thuat-ban-hang-vi-dai-nhat-the-gioi",
      description:
        "Nh·ªØng b√†i h·ªçc c·ªët l√µi v·ªÅ ngh·ªá thu·∫≠t thuy·∫øt ph·ª•c v√† b√°n h√†ng.",
      price: 78000,
      stock: 150,
      publishYear: 1968,
      publisher: "Nh√† xu·∫•t b·∫£n Lao ƒê·ªông",
      pages: 256,
      isbn: "978-604-1-00025-7",
      coverImage:
        "https://images.unsplash.com/photo-1553729459-efe14ef6055d?w=600",
      isFeatured: false,
      authorId: authors[1].id,
      categoryId: categories[3].id,
    },
    {
      title: "5 Gi·ªù S√°ng C√¢u L·∫°c B·ªô",
      slug: "5-gio-sang-cau-lac-bo",
      description:
        "Ph∆∞∆°ng ph√°p thay ƒë·ªïi cu·ªôc s·ªëng b·∫±ng c√°ch th·ª©c d·∫≠y s·ªõm v√† t·∫≠n d·ª•ng th·ªùi gian hi·ªáu qu·∫£.",
      price: 115000,
      originalPrice: 145000,
      stock: 200,
      publishYear: 2018,
      publisher: "Nh√† xu·∫•t b·∫£n Th·∫ø Gi·ªõi",
      pages: 368,
      isbn: "978-604-1-00030-1",
      coverImage:
        "https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=600",
      isFeatured: true,
      authorId: authors[5].id,
      categoryId: categories[3].id,
    },

    // VƒÉn h·ªçc n∆∞·ªõc ngo√†i
    {
      title: "R·ª´ng Na Uy",
      slug: "rung-na-uy",
      description:
        "C√¢u chuy·ªán t√¨nh y√™u ƒëan xen v·ªõi n·ªói bu·ªìn v√† c√¥ ƒë∆°n c·ªßa tu·ªïi tr·∫ª.",
      price: 125000,
      originalPrice: 160000,
      stock: 100,
      publishYear: 1987,
      publisher: "Nh√† xu·∫•t b·∫£n H·ªôi Nh√† VƒÉn",
      pages: 448,
      isbn: "978-604-1-00004-2",
      coverImage:
        "https://images.unsplash.com/photo-1526243741027-444d633d7365?w=600",
      isFeatured: false,
      authorId: authors[2].id,
      categoryId: categories[1].id,
    },
    {
      title: "Kafka B√™n B·ªù Bi·ªÉn",
      slug: "kafka-ben-bo-bien",
      description:
        "Ti·ªÉu thuy·∫øt si√™u th·ª±c k·∫øt h·ª£p gi·ªØa th·∫ø gi·ªõi hi·ªán ƒë·∫°i v√† huy·ªÅn ·∫£o.",
      price: 135000,
      stock: 90,
      publishYear: 2002,
      publisher: "Nh√† xu·∫•t b·∫£n H·ªôi Nh√† VƒÉn",
      pages: 520,
      isbn: "978-604-1-00035-6",
      coverImage:
        "https://images.unsplash.com/photo-1519682337058-a94d519337bc?w=600",
      isFeatured: false,
      authorId: authors[2].id,
      categoryId: categories[1].id,
    },
    {
      title: "Nh√† Gi·∫£ Kim",
      slug: "nha-gia-kim",
      description:
        "H√†nh tr√¨nh t√¨m ki·∫øm kho b√°u v√† √Ω nghƒ©a cu·ªôc s·ªëng c·ªßa ch√†ng chƒÉn c·ª´u Santiago.",
      price: 79000,
      originalPrice: 99000,
      stock: 250,
      publishYear: 1988,
      publisher: "Nh√† xu·∫•t b·∫£n H·ªôi Nh√† VƒÉn",
      pages: 227,
      isbn: "978-604-1-00040-0",
      coverImage:
        "https://images.unsplash.com/photo-1509266272358-7701da638078?w=600",
      isFeatured: true,
      authorId: authors[9].id,
      categoryId: categories[1].id,
    },

    // Kinh t·∫ø - Kh·ªüi nghi·ªáp
    {
      title: "Tr√™n ƒê∆∞·ªùng BƒÉng",
      slug: "tren-duong-bang",
      description:
        "Nh·ªØng b√†i h·ªçc kinh doanh v√† kh·ªüi nghi·ªáp t·ª´ tr·∫£i nghi·ªám c·ªßa Tony Bu·ªïi S√°ng.",
      price: 98000,
      originalPrice: 125000,
      stock: 180,
      publishYear: 2015,
      publisher: "Nh√† xu·∫•t b·∫£n Th·∫ø Gi·ªõi",
      pages: 280,
      isbn: "978-604-1-00005-9",
      coverImage:
        "https://images.unsplash.com/photo-1486312338219-ce68d2c6f44d?w=600",
      isFeatured: true,
      authorId: authors[3].id,
      categoryId: categories[2].id,
    },
    {
      title: "T√¥i T√†i Gi·ªèi B·∫°n C≈©ng Th·∫ø",
      slug: "toi-tai-gioi-ban-cung-the",
      description:
        "K√≠ch ho·∫°t ti·ªÅm nƒÉng b·∫£n th√¢n v√† ƒë·∫°t th√†nh c√¥ng trong h·ªçc t·∫≠p, c√¥ng vi·ªác.",
      price: 88000,
      stock: 160,
      publishYear: 2017,
      publisher: "Nh√† xu·∫•t b·∫£n Th·∫ø Gi·ªõi",
      pages: 312,
      isbn: "978-604-1-00045-5",
      coverImage:
        "https://images.unsplash.com/photo-1552664730-d307ca884978?w=600",
      isFeatured: false,
      authorId: authors[3].id,
      categoryId: categories[2].id,
    },

    // Khoa h·ªçc - C√¥ng ngh·ªá
    {
      title: "Sapiens: L∆∞·ª£c S·ª≠ Lo√†i Ng∆∞·ªùi",
      slug: "sapiens-luoc-su-loai-nguoi",
      description:
        "L·ªãch s·ª≠ ti·∫øn ho√° c·ªßa lo√†i ng∆∞·ªùi t·ª´ ƒë·ªì ƒë√° ƒë·∫øn k·ª∑ nguy√™n c√¥ng ngh·ªá.",
      price: 189000,
      originalPrice: 220000,
      stock: 140,
      publishYear: 2011,
      publisher: "Nh√† xu·∫•t b·∫£n Th·∫ø Gi·ªõi",
      pages: 512,
      isbn: "978-604-1-00050-9",
      coverImage:
        "https://images.unsplash.com/photo-1532012197267-da84d127e765?w=600",
      isFeatured: true,
      authorId: authors[6].id,
      categoryId: categories[4].id,
    },
    {
      title: "Homo Deus: L∆∞·ª£c S·ª≠ T∆∞∆°ng Lai",
      slug: "homo-deus-luoc-su-tuong-lai",
      description: "Nh·ªØng d·ª± b√°o v·ªÅ t∆∞∆°ng lai c·ªßa nh√¢n lo·∫°i trong th·∫ø k·ª∑ 21.",
      price: 179000,
      stock: 110,
      publishYear: 2015,
      publisher: "Nh√† xu·∫•t b·∫£n Th·∫ø Gi·ªõi",
      pages: 464,
      isbn: "978-604-1-00055-4",
      coverImage:
        "https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=600",
      isFeatured: false,
      authorId: authors[6].id,
      categoryId: categories[4].id,
    },

    // Thi·∫øu nhi
    {
      title: "Harry Potter V√† H√≤n ƒê√° Ph√π Th·ªßy",
      slug: "harry-potter-va-hon-da-phu-thuy",
      description:
        "Cu·ªën s√°ch ƒë·∫ßu ti√™n trong series Harry Potter n·ªïi ti·∫øng to√†n c·∫ßu.",
      price: 125000,
      originalPrice: 155000,
      stock: 220,
      publishYear: 1997,
      publisher: "Nh√† xu·∫•t b·∫£n Tr·∫ª",
      pages: 352,
      isbn: "978-604-1-00060-8",
      coverImage:
        "https://images.unsplash.com/photo-1621351183012-e2f9972dd9bf?w=600",
      isFeatured: true,
      authorId: authors[7].id,
      categoryId: categories[0].id,
    },
    {
      title: "Harry Potter V√† Ph√≤ng Ch·ª©a B√≠ M·∫≠t",
      slug: "harry-potter-va-phong-chua-bi-mat",
      description:
        "Ph·∫ßn hai v·ªõi nhi·ªÅu b√≠ ·∫©n v√† chuy·∫øn phi√™u l∆∞u gay c·∫•n t·∫°i Hogwarts.",
      price: 135000,
      stock: 200,
      publishYear: 1998,
      publisher: "Nh√† xu·∫•t b·∫£n Tr·∫ª",
      pages: 384,
      isbn: "978-604-1-00065-3",
      coverImage:
        "https://images.unsplash.com/photo-1589998059171-988d887df646?w=600",
      isFeatured: false,
      authorId: authors[7].id,
      categoryId: categories[0].id,
    },
    {
      title: "Charlie V√† Nh√† M√°y S√¥ C√¥ La",
      slug: "charlie-va-nha-may-so-co-la",
      description:
        "C√¢u chuy·ªán k·ª≥ di·ªáu v·ªÅ c·∫≠u b√© Charlie v√† nh√† m√°y s√¥-c√¥-la c·ªßa Willy Wonka.",
      price: 95000,
      originalPrice: 115000,
      stock: 180,
      publishYear: 1964,
      publisher: "Nh√† xu·∫•t b·∫£n Kim ƒê·ªìng",
      pages: 208,
      isbn: "978-604-1-00070-7",
      coverImage:
        "https://images.unsplash.com/photo-1481391319762-47dff72954d9?w=600",
      isFeatured: true,
      authorId: authors[8].id,
      categoryId: categories[0].id,
    },
    {
      title: "Matilda",
      slug: "matilda",
      description:
        "C√¥ b√© Matilda th√¥ng minh v·ªõi kh·∫£ nƒÉng ƒë·∫∑c bi·ªát v√† tr√°i tim ·∫•m √°p.",
      price: 89000,
      stock: 150,
      publishYear: 1988,
      publisher: "Nh√† xu·∫•t b·∫£n Kim ƒê·ªìng",
      pages: 256,
      isbn: "978-604-1-00075-2",
      coverImage:
        "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?w=600",
      isFeatured: false,
      authorId: authors[8].id,
      categoryId: categories[0].id,
    },
    {
      title: "James V√† Qu·∫£ ƒê√†o Kh·ªïng L·ªì",
      slug: "james-va-qua-dao-khong-lo",
      description:
        "Cu·ªôc phi√™u l∆∞u k·ª≥ th√∫ c·ªßa James b√™n trong qu·∫£ ƒë√†o kh·ªïng l·ªì.",
      price: 85000,
      stock: 140,
      publishYear: 1961,
      publisher: "Nh√† xu·∫•t b·∫£n Kim ƒê·ªìng",
      pages: 192,
      isbn: "978-604-1-00080-6",
      coverImage:
        "https://images.unsplash.com/photo-1544716278-e513176f20b5?w=600",
      isFeatured: false,
      authorId: authors[8].id,
      categoryId: categories[0].id,
    },

    // Th√™m ƒëa d·∫°ng
    {
      title: "Tu·ªïi Th∆° D·ªØ D·ªôi",
      slug: "tuoi-tho-du-doi",
      description:
        "T·∫≠p truy·ªán v·ªÅ tu·ªïi th∆° nhi·ªÅu k·ª∑ ni·ªám, c·∫£m x√∫c m·∫°nh m·∫Ω.",
      price: 72000,
      stock: 95,
      publishYear: 1989,
      publisher: "Nh√† xu·∫•t b·∫£n Kim ƒê·ªìng",
      pages: 176,
      isbn: "978-604-1-00085-1",
      coverImage:
        "https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=600",
      isFeatured: false,
      authorId: authors[0].id,
      categoryId: categories[0].id,
    },
    {
      title: "ƒê√™m Gi·ªØa Ban Ng√†y",
      slug: "dem-giua-ban-ngay",
      description: "Ti·ªÉu thuy·∫øt ƒë∆∞∆°ng ƒë·∫°i v·ªõi nhi·ªÅu suy t∆∞, trƒÉn tr·ªü.",
      price: 98000,
      originalPrice: 120000,
      stock: 110,
      publishYear: 2019,
      publisher: "Nh√† xu·∫•t b·∫£n H·ªôi Nh√† VƒÉn",
      pages: 296,
      isbn: "978-604-1-00090-5",
      coverImage:
        "https://images.unsplash.com/photo-1519682577862-22b62b24e493?w=600",
      isFeatured: false,
      authorId: authors[4].id,
      categoryId: categories[1].id,
    },
    {
      title: "Ngh·ªá Thu·∫≠t S·ªëng T·ªëi Gi·∫£n",
      slug: "nghe-thuat-song-toi-gian",
      description:
        "S·ªëng ƒë∆°n gi·∫£n, √Ω nghƒ©a v√† h·∫°nh ph√∫c h∆°n trong th·∫ø gi·ªõi hi·ªán ƒë·∫°i.",
      price: 89000,
      stock: 130,
      publishYear: 2020,
      publisher: "Nh√† xu·∫•t b·∫£n Th·∫ø Gi·ªõi",
      pages: 240,
      isbn: "978-604-1-00095-0",
      coverImage:
        "https://images.unsplash.com/photo-1519389950473-47ba0277781c?w=600",
      isFeatured: false,
      authorId: authors[5].id,
      categoryId: categories[3].id,
    },
    {
      title: "T∆∞ Duy Nhanh V√† Ch·∫≠m",
      slug: "tu-duy-nhanh-va-cham",
      description:
        "Hai h·ªá th·ªëng t∆∞ duy v√† t√°c ƒë·ªông c·ªßa ch√∫ng ƒë·∫øn quy·∫øt ƒë·ªãnh c·ªßa con ng∆∞·ªùi.",
      price: 159000,
      originalPrice: 195000,
      stock: 85,
      publishYear: 2011,
      publisher: "Nh√† xu·∫•t b·∫£n Th·∫ø Gi·ªõi",
      pages: 512,
      isbn: "978-604-1-00100-3",
      coverImage:
        "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600",
      isFeatured: true,
      authorId: authors[6].id,
      categoryId: categories[4].id,
    },
    {
      title: "C√† Ph√™ C√πng Tony",
      slug: "ca-phe-cung-tony",
      description:
        "Nh·ªØng tr·∫£i nghi·ªám, suy ng·∫´m v·ªÅ cu·ªôc s·ªëng, h·ªçc t·∫≠p, c√¥ng vi·ªác.",
      price: 79000,
      stock: 170,
      publishYear: 2016,
      publisher: "Nh√† xu·∫•t b·∫£n Th·∫ø Gi·ªõi",
      pages: 268,
      isbn: "978-604-1-00105-8",
      coverImage:
        "https://images.unsplash.com/photo-1511920170033-f8396924c348?w=600",
      isFeatured: false,
      authorId: authors[3].id,
      categoryId: categories[3].id,
    },
    {
      title: "Khi H∆°i Th·ªü H√≥a Thinh Kh√¥ng",
      slug: "khi-hoi-tho-hoa-thinh-khong",
      description:
        "H·ªìi k√Ω x√∫c ƒë·ªông c·ªßa b√°c sƒ© ƒë·ªëi m·∫∑t v·ªõi ung th∆∞ v√† √Ω nghƒ©a cu·ªôc s·ªëng.",
      price: 109000,
      originalPrice: 135000,
      stock: 120,
      publishYear: 2016,
      publisher: "Nh√† xu·∫•t b·∫£n Lao ƒê·ªông",
      pages: 256,
      isbn: "978-604-1-00110-2",
      coverImage:
        "https://images.unsplash.com/photo-1505682634904-d7c8d95cdc50?w=600",
      isFeatured: true,
      authorId: authors[9].id,
      categoryId: categories[1].id,
    },

    // B·ªï sung ƒë·ªÉ ƒë·ªß 25+
    {
      title: "Bi√™n Ni√™n K√Ω Chim V·∫∑n D√¢y C√≥t",
      slug: "bien-nien-ky-chim-van-day-cot",
      description:
        "Ti·ªÉu thuy·∫øt ti√™u bi·ªÉu c·ªßa Murakami, ƒëan xen hi·ªán th·ª±c v√† si√™u th·ª±c.",
      price: 179000,
      stock: 95,
      publishYear: 1994,
      publisher: "Nh√† xu·∫•t b·∫£n H·ªôi Nh√† VƒÉn",
      pages: 607,
      isbn: "978-604-1-00120-1",
      coverImage:
        "https://images.unsplash.com/photo-1519681393784-d120267933ba?w=600",
      isFeatured: false,
      authorId: authors[2].id,
      categoryId: categories[1].id,
    },
    {
      title: "1Q84 (T·∫≠p 1)",
      slug: "1q84-tap-1",
      description:
        "C√¢u chuy·ªán song song gi·ªØa th·ª±c t·∫°i v√† m·ªôt th·∫ø gi·ªõi 1Q84 b√≠ ·∫©n.",
      price: 165000,
      stock: 90,
      publishYear: 2009,
      publisher: "Nh√† xu·∫•t b·∫£n H·ªôi Nh√† VƒÉn",
      pages: 528,
      isbn: "978-604-1-00121-8",
      coverImage:
        "https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=600",
      isFeatured: false,
      authorId: authors[2].id,
      categoryId: categories[1].id,
    },
    {
      title: "Nh√† S∆∞ B√°n Chi·∫øc Ferrari",
      slug: "nha-su-ban-chiec-ferrari",
      description:
        "C√¢u chuy·ªán truy·ªÅn c·∫£m h·ª©ng v·ªÅ t·ªânh th·ª©c v√† s·ªëng c√≥ m·ª•c ƒë√≠ch.",
      price: 99000,
      stock: 140,
      publishYear: 1997,
      publisher: "Nh√† xu·∫•t b·∫£n Tr·∫ª",
      pages: 240,
      isbn: "978-604-1-00122-5",
      coverImage:
        "https://images.unsplash.com/photo-1532012197267-da84d127e765?w=600",
      isFeatured: false,
      authorId: authors[5].id,
      categoryId: categories[3].id,
    },
    {
      title: "21 B√†i H·ªçc Cho Th·∫ø K·ª∑ 21",
      slug: "21-bai-hoc-cho-the-ky-21",
      description:
        "Nh·ªØng suy ng·∫´m c·ªßa Harari v·ªÅ c√¥ng ngh·ªá, ch√≠nh tr·ªã, gi√°o d·ª•c th·ªùi hi·ªán ƒë·∫°i.",
      price: 189000,
      stock: 120,
      publishYear: 2018,
      publisher: "Nh√† xu·∫•t b·∫£n Th·∫ø Gi·ªõi",
      pages: 432,
      isbn: "978-604-1-00123-2",
      coverImage:
        "https://images.unsplash.com/photo-1519681393784-d120267933ba?w=600",
      isFeatured: true,
      authorId: authors[6].id,
      categoryId: categories[4].id,
    },
    {
      title: "Harry Potter V√† T√™n T√π Nh√¢n Ng·ª•c Azkaban",
      slug: "harry-potter-va-ten-tu-nhan-nguc-azkaban",
      description:
        "Ph·∫ßn ba v·ªõi s·ª± xu·∫•t hi·ªán c·ªßa Sirius Black v√† nhi·ªÅu b√≠ ·∫©n m·ªõi.",
      price: 145000,
      stock: 200,
      publishYear: 1999,
      publisher: "Nh√† xu·∫•t b·∫£n Tr·∫ª",
      pages: 448,
      isbn: "978-604-1-00124-9",
      coverImage:
        "https://images.unsplash.com/photo-1589998059171-988d887df646?w=600",
      isFeatured: true,
      authorId: authors[7].id,
      categoryId: categories[0].id,
    },
    {
      title: "Ng∆∞·ªùi Kh·ªïng L·ªì T·ªët B·ª•ng (The BFG)",
      slug: "the-bfg",
      description:
        "H√†nh tr√¨nh k·ª≥ di·ªáu c·ªßa c√¥ b√© Sophie v√† ng∆∞·ªùi kh·ªïng l·ªì t·ªët b·ª•ng.",
      price: 92000,
      stock: 150,
      publishYear: 1982,
      publisher: "Nh√† xu·∫•t b·∫£n Kim ƒê·ªìng",
      pages: 224,
      isbn: "978-604-1-00125-6",
      coverImage:
        "https://images.unsplash.com/photo-1497633762265-9d179a990aa6?w=600",
      isFeatured: false,
      authorId: authors[8].id,
      categoryId: categories[0].id,
    },
  ];

  const createdBooks = [];
  for (const bookData of books) {
    const book = await prisma.book.upsert({
      where: { slug: bookData.slug },
      update: bookData,
      create: bookData,
    });
    createdBooks.push(book);

    // G·∫Øn 3 ·∫£nh ph·ª• c·ªë ƒë·ªãnh cho m·ªói s√°ch
    const imageUrls = [
      `https://images.unsplash.com/photo-1495446815901-a7297e633e8d?w=600`,
      `https://images.unsplash.com/photo-1512820790803-83ca734da794?w=600`,
      `https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=600`,
    ];

    await prisma.bookImage.deleteMany({ where: { bookId: book.id } });

    await prisma.bookImage.createMany({
      data: imageUrls.map((url, index) => ({
        url,
        alt: `${bookData.title} - ·∫¢nh ${index + 1}`,
        order: index + 1,
        bookId: book.id,
      })),
      skipDuplicates: true,
    });
  }
  console.log(`‚úÖ ƒê√£ t·∫°o ${createdBooks.length} ƒë·∫ßu s√°ch\n`);

  // 4) Ng·∫´u nhi√™n ho√° sold/view
  console.log("üìä ƒêang c·∫≠p nh·∫≠t th·ªëng k√™ s√°ch...");
  for (const book of createdBooks) {
    const randomSold = Math.floor(Math.random() * 500);
    const randomViews = randomSold * 10 + Math.floor(Math.random() * 2000);
    await prisma.book.update({
      where: { id: book.id },
      data: { soldCount: randomSold, viewCount: randomViews },
    });
  }
  console.log("‚úÖ ƒê√£ c·∫≠p nh·∫≠t th·ªëng k√™\n");

  // 5) Th·ªëng k√™
  const totalCategories = await prisma.category.count();
  const totalAuthors = await prisma.author.count();
  const totalBooks = await prisma.book.count();
  const totalImages = await prisma.bookImage.count();
  const featuredBooks = await prisma.book.count({ where: { isFeatured: true } });
  const booksWithDiscount = await prisma.book.count({
    where: { originalPrice: { not: null } },
  });

  console.log("üìä Th·ªëng k√™ c∆° s·ªü d·ªØ li·ªáu:");
  console.log(`   Danh m·ª•c: ${totalCategories}`);
  console.log(`   T√°c gi·∫£: ${totalAuthors}`);
  console.log(`   ƒê·∫ßu s√°ch: ${totalBooks}`);
  console.log(`   - N·ªïi b·∫≠t: ${featuredBooks}`);
  console.log(`   - C√≥ gi·∫£m gi√°: ${booksWithDiscount}`);
  console.log(`   ·∫¢nh: ${totalImages}\n`);

  // 6) B·∫£ng x·∫øp h·∫°ng
  console.log("üèÜ B·∫£ng x·∫øp h·∫°ng s√°ch:");
  const topSellers = await prisma.book.findMany({
    take: 5,
    orderBy: { soldCount: "desc" },
    include: { author: true },
  });
  console.log("\nüìà Top 5 b√°n ch·∫°y nh·∫•t:");
  topSellers.forEach((book, i) => {
    console.log(`   ${i + 1}. ${book.title} - ${book.author.name} (${book.soldCount} b·∫£n)`);
  });

  const mostViewed = await prisma.book.findMany({
    take: 5,
    orderBy: { viewCount: "desc" },
    include: { author: true },
  });
  console.log("\nüëÄ Top 5 ƒë∆∞·ª£c xem nhi·ªÅu nh·∫•t:");
  mostViewed.forEach((book, i) => {
    console.log(`   ${i + 1}. ${book.title} - ${book.author.name} (${book.viewCount} l∆∞·ª£t xem)`);
  });

  console.log("\n‚úÖ Ho√†n t·∫•t seed d·ªØ li·ªáu!\n");
}

main()
  .catch((error) => {
    console.error("\n‚ùå Seed d·ªØ li·ªáu th·∫•t b·∫°i:", error);
    process.exit(1);
  })
  .finally(() => prisma.$disconnect());
